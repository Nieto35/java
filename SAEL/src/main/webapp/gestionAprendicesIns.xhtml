<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <f:facet name="first">
            <ui:include src="templates/head.xhtml"/> 
            <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
            <title>.::SAEL::. Seguimiento de Aprendices</title>
            <link rel="shortcut icon" href="favicon.ico"/>
        </f:facet>

    </h:head>
    <h:body class="hold-transition sidebar-mini layout-fixed">
        <div class="wrapper">
            <!--        ============================================
                            CABEZOTE
                    ============================================-->
            <ui:include src="templates/cabezote.xhtml" />
            <!--        ============================================
                    MENU LATERAL
            ============================================-->
            <ui:include src="templates/menuCoordinador.xhtml" />
            <!--        ============================================
                   CONTENIDO
           ============================================-->  


            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                <!-- Content Header (Page header) -->
                <div class="content-header">
                    <div class="container-fluid">
                        <div class="row mb-2">
                            <div class="col-sm-12">
                                <!-- dialogo de ayuda -->
                                <p:dialog id="modalDialog" width="55%" header="Ayuda" widgetVar="helpDialog" showEffect="fade" hideEffect="bounce" modal="true" dynamic="true">  
                                    <p align="justify">                       
                                        En esta página usted podrá:<br/><br/>
                                        <b>-Crear, modificar, eliminar y consultar aprendices:</b> ésta opción solo está disponible para usuarios de tipo Coordinador. 
                                        Para crear un aprendiz basta con digitar su documento de identificación y luego presionar la tecla TAB(Tabulación) o Enter. 
                                        SAEL verificará que no exista un aprendiz con ese mismo documento. Si existe cargará sus datos y sino usted deberá continuar
                                        llenando el formulario. Luego de clic en el botón Crear. Para modificar o eliminar un aprendiz existente seleccionelo 
                                        de la tabla inferior.
                                        <br/><br/>
                                        <b>-Cargue masivo de aprendices:</b> para crear varios aprendices masivamente desde un archivo de Excel de clic en el botón Selecccionar. 
                                        Luego busque el archivo el cual deberá tener extensión <strong>.XLS</strong>. SAEL leerá el archivo y luego mostrará el resultado del cargue masivo. 
                                        También indicará en que filas del archivo hay errores. Para ver un ejemplo de la estructura que debe tener el archivo de clic en el enlace Ver Ejemplo. 
                                        <br/><br/> 
                                        <b>-Consultar y filtrar aprendices:</b> en la tabla de resultados se pueden visualizar todos los aprendices existentes. 
                                        Si desea filtrar los resultados basta con digitar en la columna Identificación un número especifico, de igual forma se puede utilizar 
                                        el filtro por Nombre, Apellido, Ficha y Programa.<br/>                    
                                    </p>
                                </p:dialog>
                                <b:column>
                                    <h:form id="formulario"> 
                                        <b:panel id="panel" title="Gestion de aprendices">    
                                        <b:commandLink style="text-align: left;" onclick="PF('helpDialog').show();" styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default">
                                            <h:outputText styleClass="nav-icon  fas fa-question" />
                                        </b:commandLink>
                                        <br/><br/>
                                        <b:messages id="mensajes" showDetail="true" /> 
                                            <b:panelGrid  columns="4" style="width: 82%;"> 
                                                <h:outputText value="Identificación:"/>
                                                <b:inputText id="txtIdentificacion" binding="#{aprendizVista.txtIdentificacion}">
                                                    <p:ajax listener="#{aprendizVista.txtIdentificacionListener()}" update="panel"/>
                                                </b:inputText>

                                                <h:outputText value="Nombre:"/>
                                                <b:inputText id="txtNombre" binding="#{aprendizVista.txtNombre}" />

                                                <h:outputText value="Apellido:"/>
                                                <b:inputText id="txtApellido" binding="#{aprendizVista.txtApellido}" />
                                                <b:column>
                                                    <h:outputText value="Sexo:"/>
                                                </b:column>
                                                <p:column colspan="3">
                                                    <div align="left">
                                                        <b:selectOneMenu id="selectSexo" binding="#{aprendizVista.selectSexo}" >
                                                            <f:selectItem itemLabel="MASCULINO" itemValue="M" />
                                                            <f:selectItem itemLabel="FEMENINO" itemValue="F" />
                                                        </b:selectOneMenu>
                                                    </div>                                      
                                                </p:column>  

                                                <h:outputText value="Teléfono"/>
                                                <b:inputText id="txtTelefono" binding="#{aprendizVista.txtTelefono}" />

                                                <h:outputText value="Correo:"/>
                                                <b:inputText id="txtCorreo" binding="#{aprendizVista.txtCorreo}" />
                                                <h:outputText value="Ficha:"/>
                                                <b:inputText id="txtFicha" binding="#{aprendizVista.txtFicha}" >
                                                    <p:ajax listener="#{aprendizVista.txtFichaListener()}" />
                                                </b:inputText>            

                                                <h:outputText value="Jornada:"/>
                                                <b:inputText id="txtJornada" binding="#{aprendizVista.txtJornada}" disabled="true"/>
                                                
                                                <h:outputText value="Programa:"/>
                                                <p:column colspan="5">
                                                    <b:inputText id="txtPrograma" binding="#{aprendizVista.txtPrograma}"  disabled="true"></b:inputText>
                                                </p:column>
                                            </b:panelGrid>
                                            <div align="center" style="position: relative; bottom: -20px;"> 
                                                <div class="col-md-2"></div> 
                                                <div class="col-md-2">
                                                    <b:commandButton id="btnCrear" look="success" value="Crear" binding="#{aprendizVista.btnCrear}" action="#{aprendizVista.crearAction()}" update="formulario" />
                                                </div>
                                                <div class="col-md-2">
                                                    <b:commandButton id="btnModificar"  look="warning" disabled="true" value="Modificar" binding="#{aprendizVista.btnModificar}" action="#{aprendizVista.modificarAction()}" update="formulario" />
                                                </div>
                                                <div class="col-md-2">
                                                    <b:commandButton id="btnEliminar" look="danger"  value="Eliminar" binding="#{aprendizVista.btnEliminar}" onclick="PF('confirmation').show();" type="button" disabled="true" process="@this" update="formulario"/>
                                                </div>
                                                <div class="col-md-2">
                                                    <b:commandButton id="btnLimpiar"  look="info" value="Limpiar" binding="#{aprendizVista.btnLimpiar}" action="#{aprendizVista.limpiarAction()}" update="formulario" />
                                                </div>
                                                <div class="col-md-2"></div> 
                                            </div>  

                                            <br/><br/><br/><br/>
                                            <p:separator/>
                                            
                                            <b:dataTable id="listaFichas" searching="true" value="#{aprendizVista.listaAprendices}" 
                                                         selection-mode="single" var="aprendices" select="true" responsive="true"
                                                         update=":formulario" caption="Si desea buscar un aprendiz digite el dato en el filtro respectivo" onselect="ajax:actividadVista.onRowSelect(aprendices)">

                                                <b:dataTableColumn label="Documento" value="#{aprendices.documentoaprendiz}" style="text-align: center" />
                                                <b:dataTableColumn label="Nombres y Apellidos" value="#{aprendices.personal.nombre}  #{aprendices.personal.apellido}" style="text-align: center" />

                                            </b:dataTable>
                                        </b:panel> 
                                        <!--Panel Exportar -->
                                        
                                        <b:panel title="Exportar">   
                                            <h:commandLink>
                                                <!--PDF-->
                                                <h:outputText value="PDF" />
                                                <p:dataExporter type="pdf" fileName="ListadoAprendices" target="listaAprendices"/>
                                            </h:commandLink>

                                            <h:outputText value=" | " />

                                            <h:commandLink>
                                                <!--EXCEL-->
                                                <h:outputText value="XLS" />
                                                <p:dataExporter type="xls" fileName="ListadoAprendices" target="listaAprendices"/>
                                            </h:commandLink>
                                        </b:panel>
                                    </h:form>
                                    
                                    <h:form id="formDialog" > 
                                        <p:confirmDialog id="confirmDialog" message="Está Seguro de Eliminar el Aprendiz?"  
                                                         header="Confirmación" severity="alert" widgetVar="confirmation">  
                                            <p:commandButton id="confirm" value="Si" oncomplete="confirmation.hide()" update=":formulario:panel"  
                                                             actionListener="#{aprendizVista.onEliminacionConfirm}" />  
                                            <p:commandButton id="decline" value="No" onclick="PF('confirmation').hide()" type="button" />   

                                        </p:confirmDialog> 
                                    </h:form>
                                    
                                </b:column>


                            </div><!-- /.col -->          
                        </div><!-- /.row -->
                    </div><!-- /.container-fluid -->
                </div>
                <!-- /.content-header -->

                <div align="center">


                </div>   

            </div>

            <!--        ============================================
                FOOTER
         ============================================-->
            <ui:include src="templates/footer.xhtml" />


        </div>


    </h:body>
</html>

