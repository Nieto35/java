<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>.::SAEL::. Seguimiento de Aprendices</title>
                <link rel="shortcut icon" href="favicon.ico"/>
            </f:facet>
        </h:head>
        <h:body>
                    <h:graphicImage url="images/banner_sael.jpg" width="100%" height="100%" alt="Logo Sael"  style="vertical-align: top;"/> 
            <p:panel>
                <p:panelGrid> 
                    <p:row>
                        <p:column style="vertical-align: top;"> 
                    <h:form>
                         <p:menu>
                            <p:submenu label="Menú">                                
                                <p:menuitem value="Inicio" url="indexCoordinador.xhtml" />
                                <p:menuitem value="Programar Seguimiento" url="gestionSeguimientosC.xhtml" />
                                <p:menuitem value="Aprendices" url="gestionAprendicesC.xhtml" />
                                <p:menuitem value="Instructores" url="gestionInstructoresC.xhtml" />
                                <p:menuitem value="Lideres Fichas" url="gestionLideresC.xhtml" />
                                <p:menuitem value="Reportes" url="reportesSaelC.xhtml" />
                                <p:menuitem value="Cambio Contraseña" url="CambiaPasswordCoord.xhtml" />
                                <p:menuitem value="Cerrar Sesión" actionListener="#{usuariosSaelVista.cerrarSesion_action}" />
                            </p:submenu>                      
                        </p:menu>
                    </h:form>
                
                <!-- dialogo de ayuda -->
                <p:dialog id="modalDialog" header="Ayuda" widgetVar="helpDialog" showEffect="fade" hideEffect="bounce" modal="true" dynamic="true">  
                    <p align="justify">                       
                    En esta página usted podrá:<br/><br/>
                    <b>-Crear, Modificar, Eliminar y Consultar Aprendices:</b> ésta opción solo está disponible para usuarios de tipo Coordinador. 
                    Para crear un aprendiz basta con digitar su documento de identificación y luego presionar la tecla TAB(Tabulación) o Enter. 
                    ASPERA verificará que no exista un aprendiz con ese mismo documento. Si existe cargará sus datos y sino usted deberá continuar
                    llenando el formulario. Luego de clic en el botón Crear. Para modificar o eliminar un aprendiz existente seleccionelo 
                    de la tabla inferior.
                    <br/><br/>
                    <b>-Cargue Masivo de Aprendices:</b> para crear varios aprendices masivamente desde un archivo de Excel de clic en el botón Selecccionar. 
                    Luego busque el archivo el cual deberá tener extensión <strong>.XLS</strong>. ASPERA leerá el archivo y luego mostrará el resultado del cargue masivo. 
                    También indicará en que filas del archivo hay errores. Para ver un ejemplo de la estructura que debe tener el archivo de clic en el enlace Ver Ejemplo. 
                    <br/><br/> 
                    <b>-Consultar y Filtrar Aprendices:</b> en la tabla de resultados se pueden visualizar todos los aprendices existentes. 
                    Si desea filtrar los resultados basta con digitar en la columna Identificación un número especifico, de igual forma se puede utilizar 
                    el filtro por Nombre, Apellido, Ficha y Programa.<br/>                    
                    </p>
                </p:dialog>
                        </p:column>
                        <p:column>
                    <h:form id="formulario"> 
                        <p:panel id="panel">
                             <p:growl id="growl" showDetail="true" sticky="true" /> 
                            <p:messages id="mensajes" showDetail="true" /> 
                            <p:panel id="panelL" header="Asignación de Líderes Fichas"> 
                                 <f:facet name="actions">
                                            <p:commandLink onclick="PF('helpDialog').show();" styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default"><h:outputText styleClass="ui-icon ui-icon-help" /></p:commandLink>
                                        </f:facet>
                                <p:panelGrid  columns="2" style="width: 82%;">   
                                    <p:panelGrid  columns="2" id="paFicha"> 
                                        <h:outputText value="Ficha:"/>
                                        <p:inputText id="txtFicha" binding="#{lideresVista.txtFicha}" >
                                            <p:ajax listener="#{lideresVista.txtFicha_listener}" update="paFicha" />
                                        </p:inputText>            

                                        <h:outputText value="Jornada:"/>
                                        <p:inputText id="txtJornada" binding="#{lideresVista.txtJornada}" disabled="true"/>

                                        <h:outputText value="Programa:"/>
                                        <p:inputTextarea id="txtPrograma" rows="5" cols="25" autoResize="false" binding="#{lideresVista.txtPrograma}"  disabled="true"></p:inputTextarea>
                                    </p:panelGrid>
                                    <p:panelGrid  columns="2" > 
                                        <h:outputText value="Documento:"/>
                                        <p:inputText id="txtDocumento" binding="#{lideresVista.txtDocumento}" >
                                            <p:ajax listener="#{lideresVista.txtDocumento_listener}" update="formulario" />
                                        </p:inputText>            

                                        <h:outputText value="Nombre:"/>
                                        <p:inputText id="txtNombre" binding="#{lideresVista.txtNombre}" disabled="true"/>

                                        <h:outputText value="Apellido:"/>
                                        <p:inputText id="txtApellido" binding="#{lideresVista.txtApellido}" disabled="true"/>
                                    </p:panelGrid>
                                    
                               
                                    <f:facet name="footer"> 
                                        <div align="center"> 
                                            <p:commandButton id="btnCrear" value="Crear" binding="#{lideresVista.btnRegistrar}" action="#{lideresVista.registrar_action}" update="formulario" />
                                            <p:commandButton id="btnEliminar" value="Eliminar" binding="#{lideresVista.btnEliminar}" onclick="PF('confirmation').show();" type="button" disabled="true" />
                                            <p:commandButton id="btnLimpiar" value="Limpiar" binding="#{lideresVista.btnLimpiar}" action="#{lideresVista.limpiar_action}" update="formulario" />
                                        </div>
                                    </f:facet>
                                </p:panelGrid>   
                            </p:panel> 
                             <br />
                            <h:outputText value="Si Desea Buscar un Seguimiento digite el Dato en el Filtro Respectivo" />
                            <br /><br />                                
                            <p:dataTable id="listaLideres" var="lideres" filteredValue="#{lideresVista.listaLideres}" value="#{lideresVista.listaLideres}" selection="#{lideresVista.selectedLider}"
                                             selectionMode="single" rowKey="#{lideres.numerolider}" paginator="true" rows="5" emptyMessage="No hay Lideres Asignados!">
                                    <p:ajax event="rowSelect" listener="#{lideresVista.onRowSelect}"   
                                        update=":formulario:panelL" />
                                    <p:column sortBy="#{lideres.numerolider}" filterBy="#{lideres.numerolider}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText  value="Número" />                            
                                    </f:facet>
                                        <h:outputText  value="#{lideres.numerolider}" />                          
                                </p:column>
                                    <p:column sortBy="#{lideres.fichaTitulacion.ficha}" filterBy="#{lideres.fichaTitulacion.ficha}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText  value="Ficha" />                            
                                    </f:facet>
                                    <h:outputText  value="#{lideres.fichaTitulacion.ficha}" />                          
                                </p:column>

                                <p:column sortBy="#{lideres.documentoinstructor.documento.documento}" filterBy="#{lideres.documentoinstructor.documento.documento}">
                                    <f:facet name="header" >
                                        <h:outputText  value="Documento" />                            
                                    </f:facet>
                                    <h:outputText  value="#{lideres.documentoinstructor.documento.documento}" />                          
                                </p:column>

                                <p:column sortBy="#{lideres.documentoinstructor.documento.nombre}" filterBy="#{lideres.documentoinstructor.documento.nombre}">
                                    <f:facet name="header" >
                                        <h:outputText  value="Nombre" />                            
                                    </f:facet>
                                    <h:outputText  value="#{lideres.documentoinstructor.documento.nombre}" />                          
                                </p:column>
                                                                
                                <p:column sortBy="#{lideres.documentoinstructor.documento.apellido}" filterBy="#{lideres.documentoinstructor.documento.apellido}">
                                    <f:facet name="header" >
                                        <h:outputText  value="Apellido" />                            
                                    </f:facet>
                                    <h:outputText  value="#{lideres.documentoinstructor.documento.apellido}" />                          
                                </p:column>       
                                
                                <p:column sortBy="#{lideres.fechaasignacion}" filterBy="#{lideres.fechaasignacion}">
                                    <f:facet name="header" >
                                        <h:outputText  value="Fecha" />                            
                                    </f:facet>
                                    <h:outputText  value="#{lideres.fechaasignacion}" />                          
                                </p:column> 
                            </p:dataTable> 
                            <!--Panel Exportar -->
                            <p:panel header="Exportar">   
                                <h:commandLink>
                                    <!--PDF-->
                                    <h:outputText value="PDF" />
                                    <p:dataExporter type="pdf" fileName="listaLideres" target="listaLideres"/>
                                </h:commandLink>

                                <h:outputText value=" | " />

                                <h:commandLink>
                                    <!--EXCEL-->
                                    <h:outputText value="XLS" />
                                    <p:dataExporter type="xls" fileName="listaLideres" target="listaLideres"/>
                                </h:commandLink>
                            </p:panel>
                            
                        </p:panel>
                    </h:form>
                        </p:column>
                    </p:row>
                </p:panelGrid>
            </p:panel>
                    <div align="center">
                <h:graphicImage url="images/pie_sael.jpg" width="100%" height="100%" alt="LogoSAEL"  style="vertical-align: bottom;"/>
            </div>
            <!-- Dialogo de confirmacion para el boton eliminar -->
            <h:form id="formDialog" > 
                <p:confirmDialog id="confirmDialog" message="Está Seguro de Eliminar el Líder?"  
                                 header="Confirmación" severity="alert" widgetVar="confirmation">  
                    <p:commandButton id="confirm" value="Si" oncomplete="confirmation.hide()" update=":formulario:panel"  
                                     actionListener="#{lideresVista.onEliminacionConfirm}" />  
                    <p:commandButton id="decline" value="No" onclick="PF('confirmation').hide()" type="button" />   

                </p:confirmDialog> 
            </h:form>
        </h:body>

    </f:view>
</html>
