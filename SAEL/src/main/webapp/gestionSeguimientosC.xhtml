<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <ui:include src="templates/head.xhtml"/> 
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>.::SAEL::. Seguimiento de Aprendices</title>
                <link rel="shortcut icon" href="favicon.ico"/>
            </f:facet>
        </h:head>
        <h:body>
                    <h:graphicImage url="images/banner_sael.jpg" width="100%" height="100%" alt="Logo Sael"  style="vertical-align: top;"/> 
<p:panel>
                <p:panelGrid> 
                    <p:row>
                        <p:column style="vertical-align: top;"> 
                  
                    <h:form>
                         <p:menu>
                            <p:submenu label="Menú">                                
                                <p:menuitem value="Inicio" url="indexCoordinador.xhtml" />
                                <p:menuitem value="Programar Seguimiento" url="gestionSeguimientosC.xhtml" />
                                <p:menuitem value="Aprendices" url="gestionAprendicesC.xhtml" />
                                <p:menuitem value="Instructores" url="gestionInstructoresC.xhtml" />
                                <p:menuitem value="Lideres Fichas" url="gestionLideresC.xhtml" />
                                <p:menuitem value="Reportes" url="reportesSaelC.xhtml" />
                                <p:menuitem value="Cambio Contraseña" url="CambiaPasswordCoord.xhtml" />
                                <p:menuitem value="Cerrar Sesión" actionListener="#{usuariosSaelVista.cerrarSesion_action}" />
                            </p:submenu>                    
                        </p:menu>
                    </h:form>
                       
                        
                
                <!-- dialogo de ayuda -->
                <p:dialog id="modalDialog" header="Ayuda" widgetVar="helpDialog" showEffect="fade" hideEffect="bounce" modal="true" dynamic="true">  
                    <p align="justify">                       
                    En esta página usted podrá:<br/><br/>
                    <b>-Crear, Modificar, Cancelar y Consultar Seguimientos:</b> ésta opción solo está disponible para usuarios de tipo Coordinador. 
                    Para crear un seguimiento basta con digitar la ficha y luego presionar la tecla TAB(Tabulación) o Enter. 
                    ASPERA verificará la existencia de la ficha y posteriormente se deberá ingresar la fecha de programación, la hora, la ciudad y el lugar. Luego de clic en el botón Registrar. Para modificar o cancelar un seguimiento existente seleccionelo 
                    de la tabla inferior.
                    <br/><br/>
                    <b>-Consultar y Filtrar Seguimientos:</b> en la tabla de resultados se pueden visualizar todos los seguimientos programados, cancelados y/o ejecutados. 
                    Si desea filtrar los resultados basta con digitar en la columna respectiva un dato especifico.<br/>                    
                    </p>
                </p:dialog>
                        </p:column>
                         <p:column>      
                    <h:form id="formulario"> 
                        <p:panel id="panel">
                            <p:messages id="mensajes" showDetail="true" /> 
                            <p:growl id="growl" showDetail="true" sticky="true" /> 
                            <p:panel id="panelSeguimientos" header="Programar Seguimientos"> 
                                <f:facet name="actions">
                                        <p:commandLink onclick="PF('helpDialog').show();" styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default"><h:outputText styleClass="ui-icon ui-icon-help" /></p:commandLink>
                                    </f:facet>
                                <p:panelGrid  columns="2" style="width: 82%;">   
                                     <p:panelGrid  columns="2" id="paFicha"> 
                                        <h:outputText value="Ficha:"/>
                                        <p:inputText id="txtFicha" binding="#{seguimientosVista.txtFicha}" >
                                            <p:ajax listener="#{seguimientosVista.txtFicha_listener}" update="formulario" />
                                        </p:inputText>            

                                        <h:outputText value="Jornada:"/>
                                        <p:inputText id="txtJornada" binding="#{seguimientosVista.txtJornada}" disabled="true"/>

                                        <h:outputText value="Programa:"/>
                                        <p:inputTextarea id="txtPrograma" rows="5" cols="25" autoResize="false" binding="#{seguimientosVista.txtPrograma}"  disabled="true"></p:inputTextarea>
                                    </p:panelGrid>
                                    <p:panelGrid  columns="2"> 
                                        <h:outputText value="Código:"/>
                                        <p:inputText id="txtCodigo" binding="#{seguimientosVista.txtCodigo}" value="#{seguimientosVista.codigoSeguimiento}" disabled="true"/>

                                        <h:outputText value="Fecha:"/> 
                                        <p:calendar  id="txtFecha" binding="#{seguimientosVista.txtFecha}" pattern="yyyy-MM-dd" />
                                        
                                        <h:outputText value="Hora:"/>
                                        <p:calendar id="txtHora" binding="#{seguimientosVista.txtHora}" pattern="HH:mm" timeOnly="true" /> 

                         
                                        <h:outputText value="Ciudad:"/>
                                        <p:inputText id="txtCiudad" binding="#{seguimientosVista.txtCiudad}" />
                                        
                                        <h:outputText value="Lugar:"/>
                                        <p:inputText id="txtLugar" binding="#{seguimientosVista.txtLugar}" />
                                        
                                        <h:outputText value="Estado:"/>
                                        <p:selectOneMenu disabled="true" id="cmbEstadoSeguimiento" binding="#{seguimientosVista.cmbEstadoSeguimiento}" >
                                                <f:selectItem itemLabel="PROGRAMADO" itemValue="PROGRAMADO" />
                                                <f:selectItem itemLabel="EJECUTADO" itemValue="EJECUTADO" />
                                        </p:selectOneMenu>
                                    </p:panelGrid>
                                   
                               
                                    <f:facet name="footer"> 
                                        <div align="center"> 
                                            <p:commandButton id="btnCrear" value="Crear" binding="#{seguimientosVista.btnRegistrar}" action="#{seguimientosVista.registrar_action}" update="formulario" />
                                            <p:commandButton id="btnModificar" value="Modificar" binding="#{seguimientosVista.btnModificar}" action="#{seguimientosVista.modificar_action}" update="formulario" disabled="true" />
                                            <p:commandButton id="btnEliminar" value="Cancelar" binding="#{seguimientosVista.btnEliminar}" onclick="PF('confirmation').show();" type="button" disabled="true" />
                                            <p:commandButton id="btnLimpiar" value="Limpiar" binding="#{seguimientosVista.btnLimpiar}" action="#{seguimientosVista.limpiar_action}" update="formulario" />
                                        </div>
                                    </f:facet>
                                </p:panelGrid>   
                            </p:panel> 
                             <br />
                            <h:outputText value="Si Desea Buscar un Seguimiento digite el Dato en el Filtro Respectivo" />
                            <br /><br />
                            <p:dataTable id="listaSeguimientos" var="seguimientos" filteredValue="#{seguimientosVista.listaSeguimientos}" value="#{seguimientosVista.listaSeguimientos}" selection="#{seguimientosVista.selectedSeguimiento}"
                                         selectionMode="single" rowKey="#{seguimientos.codigoseguimiento}" paginator="true" rows="5" emptyMessage="No hay Seguimientos!">
                                <p:ajax event="rowSelect" listener="#{seguimientosVista.onRowSelect}"   
                                        update=":formulario:panelSeguimientos" /> 
                                <p:column sortBy="#{seguimientos.codigoseguimiento}" filterBy="#{seguimientos.codigoseguimiento}" filterMatchMode="contains">
                                    <f:facet name="header">
                                        <h:outputText  value="Código" />                            
                                    </f:facet>
                                    <h:outputText  value="#{seguimientos.codigoseguimiento}" />                          
                                </p:column>

                                <p:column sortBy="#{seguimientos.fechaseguimiento}" filterBy="#{seguimientos.fechaseguimiento}">
                                    <f:facet name="header" >
                                        <h:outputText  value="Fecha" />                            
                                    </f:facet>
                                    <h:outputText  value="#{seguimientos.fechaseguimiento}" />                          
                                </p:column>

                                <p:column sortBy="#{seguimientos.horaseguimiento}" filterBy="#{seguimientos.horaseguimiento}">
                                    <f:facet name="header" >
                                        <h:outputText  value="Hora" />                            
                                    </f:facet>
                                    <h:outputText  value="#{seguimientos.horaseguimiento}" />                          
                                </p:column>
                                                                
                                <p:column sortBy="#{seguimientos.lugarseguimiento}" filterBy="#{seguimientos.lugarseguimiento}">
                                    <f:facet name="header" >
                                        <h:outputText  value="Lugar" />                            
                                    </f:facet>
                                    <h:outputText  value="#{seguimientos.lugarseguimiento}" />                          
                                </p:column>       
                                
                                <p:column sortBy="#{seguimientos.estadoseguimiento}" filterBy="#{seguimientos.estadoseguimiento}">
                                    <f:facet name="header" >
                                        <h:outputText  value="Estado" />                            
                                    </f:facet>
                                    <h:outputText  value="#{seguimientos.estadoseguimiento}" />                          
                                </p:column> 
                                
                                <p:column sortBy="#{seguimientos.fichaTitulacion.ficha}" filterBy="#{seguimientos.fichaTitulacion.ficha}">
                                    <f:facet name="header" >
                                        <h:outputText  value="Ficha" />                            
                                    </f:facet>
                                    <h:outputText  value="#{seguimientos.fichaTitulacion.ficha}" />                          
                                </p:column> 

                            </p:dataTable> 
                            <!--Panel Exportar -->
                            <p:panel header="Exportar">   
                                <h:commandLink>
                                    <!--PDF-->
                                    <h:outputText value="PDF" />
                                    <p:dataExporter type="pdf" fileName="listaSeguimientos" target="listaSeguimientos"/>
                                </h:commandLink>

                                <h:outputText value=" | " />

                                <h:commandLink>
                                    <!--EXCEL-->
                                    <h:outputText value="XLS" />
                                    <p:dataExporter type="xls" fileName="listaSeguimientos" target="listaSeguimientos"/>
                                </h:commandLink>
                            </p:panel>
                            
                        </p:panel>
                    </h:form>
                         </p:column>
   </p:row>
                </p:panelGrid>
            </p:panel> 
                     <div align="center" >
                        <h:graphicImage url="images/pie_sael.jpg" width="100%" height="100%" alt="LogoSAEL" style="vertical-align: bottom;"/>
                    </div>
            <!-- Dialogo de confirmacion para el boton eliminar -->
            <h:form id="formDialog" > 
                <p:confirmDialog id="confirmDialog" message="Está Seguro de Eliminar el Seguimiento?"  
                                 header="Confirmación" severity="alert" widgetVar="confirmation">  
                    <p:commandButton id="confirm" value="Si" oncomplete="confirmation.hide()" update=":formulario:panel"  
                                     actionListener="#{seguimientosVista.onEliminacionConfirm}" />  
                    <p:commandButton id="decline" value="No" onclick="PF('confirmation').hide()" type="button" />   

                </p:confirmDialog> 
            </h:form>
        </h:body>

    </f:view>
</html>
